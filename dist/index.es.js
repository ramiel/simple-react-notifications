import e,{useState as t,useRef as n,useEffect as s}from"react";import{render as i}from"react-dom";const r={ids:[],add:function(e,t){this.ids.push({id:e,callback:t})},remove:function(e){if(e){const{callback:t}=this.ids.find(t=>t.id===e);t(),this.ids=this.ids.filter(t=>t.id!==e)}else this.ids.forEach(e=>e.callback()),this.ids=[]}},o=({message:t,onClose:n,type:s="info",width:i="300px",rtl:r,closeOnClick:o,onMouseEnter:a,onMouseLeave:c})=>e.createElement("div",{className:`item ${s} ${r?"rtl":"ltr"}`,style:{width:i},onClick:()=>o&&n(),onMouseEnter:a,onMouseLeave:c},e.createElement("span",null,t),e.createElement("button",{onClick:n},"âœ–")),a={};class c{constructor(e,t){let n=-1,s=0;this.remaining=t,this.pause=()=>{clearTimeout(n),this.remaining-=Date.now()-s},this.resume=()=>{s=Date.now(),clearTimeout(n),n=setTimeout(e,this.remaining)},this.resume()}}var l=i=>{const[,l]=t([]),[m,u]=t(!1),[d,p]=t(!1),h=n([]),{autoClose:y=3e3,delay:f=0,id:g}=i,{animation:E={}}=i,v=E.duration||300,b=y>0?y:0,$=e=>{h.current=((e,t)=>e.filter(e=>e.key!=t))(h.current,e),l(h.current),0===h.current.length&&i.cleared()};return s(()=>{const t=h.current.findIndex(e=>e.key==g),n=h.current[t];if(!n)return;const s=a[g].remaining,i=m&&!d?{}:{animationName:`${E.out}`,animationDelay:`${s-v}ms`,animationDuration:`${v}ms`},r=e.cloneElement(n,Object.assign({},n.props,{style:i}));h.current.splice(t,1,r),l([...h.current])},[m,d]),s(()=>{const t={id:g,onClose:()=>{setTimeout(()=>$(g),v),a[g].remaining=v,p(!0)},onMouseEnter:()=>n("pause"),onMouseLeave:()=>n("resume")},n=e=>{i.pauseOnHover&&a[g]&&a[g][e](),u("pause"===e)};let s=i.render?i.render(t):e.createElement(o,Object.assign({},i,t));v&&(s=e.createElement("div",{key:g,style:{animationName:`${E.in}, ${E.out}`,animationDelay:`0ms, ${b}ms`,animationDuration:`${v}ms, ${v}ms`}},s));const m=i.onlyLast?[]:h.current,{newestOnTop:d=!0}=i;h.current=d?[s,...m]:[...m,s],r.add(g,()=>$(g)),setTimeout(()=>l(h.current),f),a[g]=new c(()=>y&&$(g),f+b+v)},[i]),e.createElement(e.Fragment,null,h.current)};const m="simple-react-notifier";let u,d=0;const p=t=>{t=Object.assign({},u||{},t);const{position:n="top-right"}=t;let s=document.querySelector("."+m+"."+n);return s||((s=document.createElement("div")).classList.add(m,n),s.style.direction=t.rtl?"rtl":"ltr",document.body.appendChild(s)),i(e.createElement(l,Object.assign({},t,{id:d,cleared:()=>{try{document.body.removeChild(s)}catch(e){}}})),s),++d-1};p.info=e=>p({message:e,type:"info"}),p.success=e=>p({message:e,type:"success"}),p.error=e=>p({message:e,type:"error"}),p.configure=e=>{u=e},p.dismiss=e=>r.remove(e);export default p;
//# sourceMappingURL=index.es.js.map
